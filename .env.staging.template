# ============================================
# RICO'S TACOS - STAGING ENVIRONMENT
# ============================================
# SECURITY: Never commit this file to version control
# Last Updated: 2025-12-22
# Environment: Staging/Testing
# Purpose: Pre-production testing environment

# ============================================
# ENVIRONMENT IDENTIFICATION
# ============================================
NODE_ENV=staging
PROJECT_NAME=ricostacos-staging
ENVIRONMENT_NAME=staging
DEPLOY_PATH=/opt/apps/ricostacos-staging

# ============================================
# DIGITAL OCEAN INFRASTRUCTURE
# ============================================
# API Authentication
DO_API_TOKEN=CHANGE_ME_YOUR_DO_TOKEN                    # Get from: https://cloud.digitalocean.com/account/api/tokens
DO_SSH_KEY_ID=CHANGE_ME_YOUR_SSH_KEY_ID                 # Get from: https://cloud.digitalocean.com/account/security

# Droplet Configuration
DO_API_REGION=nyc3                                       # Options: nyc1, nyc3, sfo2, sfo3, sgp1, lon1, fra1, tor1
DO_API_IMAGE=docker-20-04                                # Ubuntu 20.04 with Docker pre-installed
DO_API_SIZE=s-1vcpu-2gb                                  # Staging: 1 vCPU, 2GB RAM ($12/mo)
DO_APP_NAME=ricostacos-staging
DO_DROPLET_NAME=ricostacos-staging
DO_GIT_REPO=https://github.com/9KaelirAmaya9/Woodable1.git
DO_BACKUPS_ENABLED=false                                 # Staging: backups optional
DO_MONITORING_ENABLED=true                               # Enable DO monitoring
DO_TAGS=ricostacos,staging,restaurant                    # Resource tags for organization

# ============================================
# DOMAIN & SSL CONFIGURATION
# ============================================
WEBSITE_DOMAIN=staging.ricostacos.com
TRAEFIK_WEBSITE_DOMAIN=staging.ricostacos.com
TRAEFIK_CERT_EMAIL=admin@ricostacos.com                  # Email for Let's Encrypt SSL notifications
FRONTEND_URL=https://staging.ricostacos.com
REACT_APP_API_URL=https://staging.ricostacos.com/api

# ============================================
# DATABASE CONFIGURATION
# ============================================
# SECURITY: Use strong, unique passwords (min 32 chars)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
POSTGRES_USER=ricostacos_staging                         # Descriptive username
POSTGRES_PASSWORD=CHANGE_ME_STAGING_DB_PASSWORD          # CRITICAL: Generate strong password
POSTGRES_DB=ricostacos_staging
POSTGRES_PORT=5432
POSTGRES_HOST_PORT=5432
POSTGRES_VERSION=16-alpine                               # PostgreSQL 16 (latest stable)
DB_HOST=postgres
DB_USER=ricostacos_staging
DB_PASS=CHANGE_ME_STAGING_DB_PASSWORD                    # Must match POSTGRES_PASSWORD

# Database Performance Tuning (Staging)
POSTGRES_MAX_CONNECTIONS=100                             # Max concurrent connections
POSTGRES_SHARED_BUFFERS=512MB                            # Memory for caching (25% of RAM)
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB                        # OS cache estimate
POSTGRES_WORK_MEM=4MB                                    # Memory per query operation

# ============================================
# AUTHENTICATION & SECURITY
# ============================================
# JWT Configuration
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=CHANGE_ME_STAGING_JWT_SECRET                  # CRITICAL: 64+ char random string
JWT_EXPIRE=7d                                            # Token expiration (7 days)
JWT_REFRESH_EXPIRE=30d                                   # Refresh token expiration

# Session Security
SESSION_SECRET=CHANGE_ME_STAGING_SESSION_SECRET          # For session management
COOKIE_SECURE=true                                       # HTTPS-only cookies
COOKIE_SAME_SITE=strict                                  # CSRF protection

# Password Policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=false

# ============================================
# STRIPE PAYMENT PROCESSING (TEST MODE)
# ============================================
# STAGING: Use test keys only
# Get from: https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=sk_test_CHANGE_ME                      # Stripe test secret key
STRIPE_PUBLISHABLE_KEY=pk_test_CHANGE_ME                 # Stripe test publishable key
REACT_APP_STRIPE_PUBLISHABLE_KEY=pk_test_CHANGE_ME       # Frontend Stripe key
STRIPE_WEBHOOK_SECRET=whsec_CHANGE_ME                    # Webhook signing secret
STRIPE_API_VERSION=2023-10-16                            # Lock API version for consistency

# Payment Configuration
PAYMENT_CURRENCY=usd
PAYMENT_CAPTURE_METHOD=automatic                         # automatic | manual
PAYMENT_STATEMENT_DESCRIPTOR=RICOS TACOS                 # Appears on credit card statement (max 22 chars)

# ============================================
# EMAIL SERVICE (SENDGRID)
# ============================================
# Get API key from: https://app.sendgrid.com/settings/api_keys
EMAIL_HOST=smtp.sendgrid.net
EMAIL_PORT=587
EMAIL_SECURE=true                                        # Use TLS
EMAIL_USER=apikey
EMAIL_PASSWORD=CHANGE_ME_SENDGRID_API_KEY                # SendGrid API key
EMAIL_FROM=staging@ricostacos.com                        # Sender email
EMAIL_FROM_NAME=Rico's Tacos (Staging)                   # Sender display name
EMAIL_REPLY_TO=support@ricostacos.com                    # Reply-to address

# Email Templates
EMAIL_TEMPLATE_ORDER_CONFIRMATION=order-confirmation
EMAIL_TEMPLATE_ORDER_READY=order-ready
EMAIL_TEMPLATE_ORDER_DELIVERED=order-delivered
EMAIL_TEMPLATE_PASSWORD_RESET=password-reset

# ============================================
# GOOGLE MAPS API
# ============================================
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_MAPS_API_KEY=CHANGE_ME_YOUR_EXISTING_KEY          # Google Maps API key
REACT_APP_GOOGLE_MAPS_API_KEY=CHANGE_ME_YOUR_EXISTING_KEY
GOOGLE_MAPS_REGION=US                                    # Default region
GOOGLE_MAPS_LANGUAGE=en                                  # Default language

# ============================================
# BUSINESS CONFIGURATION
# ============================================
# Restaurant Information
RESTAURANT_NAME=Rico's Tacos
RESTAURANT_ADDRESS=123 Main St, Dallas, TX 75201         # CHANGE: Your actual address
RESTAURANT_PHONE=(555) 123-4567                          # CHANGE: Your actual phone
RESTAURANT_EMAIL=info@ricostacos.com
RESTAURANT_TIMEZONE=America/Chicago                      # IANA timezone

# Operating Hours (24-hour format)
HOURS_MONDAY_OPEN=10:00
HOURS_MONDAY_CLOSE=22:00
HOURS_TUESDAY_OPEN=10:00
HOURS_TUESDAY_CLOSE=22:00
HOURS_WEDNESDAY_OPEN=10:00
HOURS_WEDNESDAY_CLOSE=22:00
HOURS_THURSDAY_OPEN=10:00
HOURS_THURSDAY_CLOSE=22:00
HOURS_FRIDAY_OPEN=10:00
HOURS_FRIDAY_CLOSE=23:00
HOURS_SATURDAY_OPEN=09:00
HOURS_SATURDAY_CLOSE=23:00
HOURS_SUNDAY_OPEN=09:00
HOURS_SUNDAY_CLOSE=21:00

# Delivery Configuration
DELIVERY_ENABLED=true
DELIVERY_MAX_DISTANCE_MILES=5                            # Maximum delivery radius
DELIVERY_MAX_TIME_MINUTES=45                             # Estimated max delivery time
DELIVERY_BASE_FEE=3.00                                   # Base delivery fee
DELIVERY_PER_MILE_FEE=1.50                               # Per-mile delivery fee
MINIMUM_DELIVERY_ORDER=15.00                             # Minimum order for delivery

# Pickup Configuration
PICKUP_ENABLED=true
PICKUP_PREP_TIME_MINUTES=20                              # Estimated pickup preparation time

# Order Configuration
ORDER_TAX_RATE=0.0825                                    # Sales tax rate (8.25%)
ORDER_TIP_SUGGESTIONS=15,18,20,25                        # Suggested tip percentages
ORDER_MAX_ITEMS_PER_ORDER=50                             # Maximum items per order
ORDER_ALLOW_FUTURE_ORDERS=true                           # Allow scheduling orders
ORDER_FUTURE_DAYS_LIMIT=7                                # Max days in advance

# ============================================
# RATE LIMITING & SECURITY
# ============================================
# API Rate Limiting
RATE_LIMIT_WINDOW_MS=900000                              # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100                              # Max requests per window
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# Specific Endpoint Limits
RATE_LIMIT_AUTH_WINDOW_MS=900000                         # 15 minutes
RATE_LIMIT_AUTH_MAX_REQUESTS=5                           # Max login attempts
RATE_LIMIT_ORDER_WINDOW_MS=60000                         # 1 minute
RATE_LIMIT_ORDER_MAX_REQUESTS=10                         # Max orders per minute

# CORS Configuration
CORS_ORIGIN=https://staging.ricostacos.com               # Allowed origins
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,PATCH
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# Security Headers
HELMET_ENABLED=true
HSTS_MAX_AGE=31536000                                    # 1 year
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# ============================================
# LOGGING & MONITORING
# ============================================
LOG_LEVEL=debug                                          # Staging: verbose logging (debug, info, warn, error)
LOG_FORMAT=json                                          # json | pretty
LOG_TIMESTAMP=true
LOG_COLORIZE=false                                       # Disable colors in production logs

# Error Tracking (Optional: Sentry, Rollbar, etc.)
ERROR_TRACKING_ENABLED=false
ERROR_TRACKING_DSN=                                      # Sentry DSN or similar
ERROR_TRACKING_ENVIRONMENT=staging

# Performance Monitoring
APM_ENABLED=false                                        # Application Performance Monitoring
APM_SERVICE_NAME=ricostacos-staging

# ============================================
# DOCKER & CONTAINER CONFIGURATION
# ============================================
# Node.js
REACT_APP_NODE_VERSION=18-alpine
BACKEND_NODE_VERSION=18-alpine

# Web Server
NGINX_VERSION=1.25-alpine
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024
NGINX_CLIENT_MAX_BODY_SIZE=10M                           # Max upload size
NGINX_KEEPALIVE_TIMEOUT=65

# Database
PGADMIN_VERSION=latest
PGADMIN_DEFAULT_EMAIL=admin@ricostacos.com
PGADMIN_DEFAULT_PASSWORD=CHANGE_ME_STRONG_PASSWORD       # Change this!
PGADMIN_CONFIG_SERVER_MODE=False

# Reverse Proxy
TRAEFIK_VERSION=v3.0
TRAEFIK_LOG_LEVEL=DEBUG                                  # Staging: verbose
TRAEFIK_ACCESS_LOG_ENABLED=true
TRAEFIK_METRICS_ENABLED=true

# ============================================
# PORT CONFIGURATION
# ============================================
REACT_APP_PORT=3000
REACT_APP_HOST_PORT=3000
NGINX_PORT=80
NGINX_HOST_PORT=8080
BACKEND_PORT=5001
BACKEND_HOST_PORT=5001
PGADMIN_PORT=80
PGADMIN_HOST_PORT=5050
TRAEFIK_PORT=80
TRAEFIK_HOST_PORT=8081
TRAEFIK_API_PORT=8082

# ============================================
# NETWORK CONFIGURATION
# ============================================
COMPOSE_PROJECT_NAME=ricostacos-staging
NETWORK_NAME=ricostacos_staging_network
TRAEFIK_DOCKER_NETWORK=ricostacos_staging_network
TRAEFIK_EXPOSED_BY_DEFAULT=false
TRAEFIK_USER=admin:$2y$05$KizJao5OhD1.C9XsGR7dOeJa6706qKMT1rpbJ/PX1UB2aSauAVBdO

# ============================================
# CACHING & PERFORMANCE
# ============================================
# Redis (Optional - for session storage, caching)
REDIS_ENABLED=false
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600                                           # Default cache TTL (1 hour)

# CDN (Optional - Cloudflare, AWS CloudFront)
CDN_ENABLED=false
CDN_URL=

# ============================================
# FEATURE FLAGS
# ============================================
FEATURE_ONLINE_ORDERING=true
FEATURE_DELIVERY=true
FEATURE_PICKUP=true
FEATURE_LOYALTY_PROGRAM=false                            # Future feature
FEATURE_GIFT_CARDS=false                                 # Future feature
FEATURE_CATERING=false                                   # Future feature
FEATURE_RESERVATIONS=false                               # Future feature

# ============================================
# THIRD-PARTY INTEGRATIONS
# ============================================
# SMS Notifications (Twilio, etc.)
SMS_ENABLED=false
SMS_PROVIDER=twilio
SMS_ACCOUNT_SID=
SMS_AUTH_TOKEN=
SMS_FROM_NUMBER=

# Analytics (Google Analytics, Mixpanel, etc.)
ANALYTICS_ENABLED=false
GOOGLE_ANALYTICS_ID=
MIXPANEL_TOKEN=

# ============================================
# BACKUP & DISASTER RECOVERY
# ============================================
BACKUP_ENABLED=false                                     # Staging: optional
BACKUP_SCHEDULE=0 2 * * *                                # Daily at 2 AM
BACKUP_RETENTION_DAYS=7                                  # Keep 7 days of backups
BACKUP_S3_BUCKET=                                        # Optional: S3 backup storage

# ============================================
# DEVELOPMENT & DEBUGGING
# ============================================
DEBUG_MODE=true                                          # Staging: enable debugging
VERBOSE_ERRORS=true                                      # Show detailed errors
SOURCE_MAPS=true                                         # Enable source maps
HOT_RELOAD=false                                         # Disable in staging

# ============================================
# COMPLIANCE & LEGAL
# ============================================
PRIVACY_POLICY_URL=https://staging.ricostacos.com/privacy
TERMS_OF_SERVICE_URL=https://staging.ricostacos.com/terms
GDPR_ENABLED=false                                       # Enable if serving EU customers
CCPA_ENABLED=false                                       # Enable if serving CA customers

# ============================================
# NOTIFICATIONS
# ============================================
# Admin Notifications
ADMIN_EMAIL=admin@ricostacos.com
ADMIN_PHONE=+15551234567
NOTIFY_ON_NEW_ORDER=true
NOTIFY_ON_ERROR=true
NOTIFY_ON_HIGH_LOAD=false

# ============================================
# END OF STAGING CONFIGURATION
# ============================================
# REMINDER: This is a STAGING environment
# - Use test payment keys
# - Verbose logging enabled
# - Security can be slightly relaxed for testing
# - DO NOT use production data
